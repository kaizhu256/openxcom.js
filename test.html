
<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="csrf-token" content="331216ec-d84a-4f7a-b967-1e594360ffdf"/>

<title>Online games / XCOM </title>

<link type="image/vnd.microsoft.icon" rel="shortcut icon" href="/favicon.ico"/>
<link type="text/css" rel="stylesheet" media="all" href="/css/960/reset.css"/>
<link type="text/css" rel="stylesheet" media="all" href="/css/960/text.css"/>
<link type="text/css" rel="stylesheet" media="all" href="/css/960/960.css"/>
<link type="text/css" rel="stylesheet" media="all" href="/css/Aristo/Aristo.css"/>
<link type="text/css" rel="stylesheet" media="all" href="/css/app.css"/>
<link type="text/css" rel="stylesheet" media="all" href="/js/colorbox/colorbox.css"/>


<link rel="alternate" hreflang="ru" lang="ru" href="/ru/xcom/browser"/>

<meta name="author" content="Guryanov Aleksander" />
<meta name="description" content="Browser version of classic game X-COM: UFO Defense. Here you can play online X-COM in your browser." />
<meta name="keywords" content="ufo,xcom,browser,online,play,game" />

<script type="text/javascript" src="/js/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="/js/jquery-ui.min.js"></script>
<script type="text/javascript" src="/js/jquery.cookie.js"></script>
</head>
<body>

<script type="text/javascript">
  var Epicport = {}; // Namespace

  Epicport.i18n = {
    html_login_success_title: "You successfully logged in",
    html_can_save_desc: "Now you can save games",
    html_can_load_desc: "Now you can load game saves",
    html_success: "Success",
    html_game_saved: "Game successfully saved",
    html_ok: "Ok",
    html_cancel: "Cancel",
  };

  try {
    var profile = $.cookie('profile');
    if (profile) {
      Epicport.profile = JSON.parse(profile);
    }
  } catch (e) {
    Epicport.profile = undefined;
  }
</script>

<script type="text/javascript" src="/js/async.js"></script>
<script type="text/javascript" src="/js/core/dialog.js"></script>
<script type="text/javascript" src="/js/core/login.js"></script>
<script type="text/javascript" src="/js/core/navbar.js"></script>
<script type="text/javascript" src="/js/game/canvas.js"></script>
<script type="text/javascript" src="/js/game/xcom.js"></script>
<script type="text/javascript" src="/js/game/dune2.js"></script>
<script type="text/javascript" src="/js/game/ttd.js"></script>
<script type="text/javascript" src="/js/game/caesaria.js"></script>
<script type="text/javascript" src="/js/game/api.js"></script>
<script>new Epicport.Navbar();</script>

<div class="canvas_container openxcom">
  <canvas id="canvas" oncontextmenu="event.preventDefault()"></canvas>
  <div id="output" class="canvas_overlay">

    <div class="click_to_start">
      <span class="huge">Please click to start the game</span>
      <span class="little"><b>NOTE:</b>&nbsp;Your browser may hang up during loading of the game, please be patient</span>
    </div>

    <div class="loader">
      <div class="info">
        <div id="status" class="status"></div>
        <div id="progress" class="progressbar"></div>
      </div>
    </div>

  </div>
</div>


<div class="select-file-dialog dialog" title="Select file">
  <p class="label">
    Select file
    <ul class="select-file-dialog-saves">
      <span>No saved games found</span>
    </ul>
  </p>
  <p class="select-file-input">
    <label for="select-file-dialog-file">Enter file name</label>
    <input id="select-file-dialog-file" type="text" value="New Game" />
  </p>
</div>

<script type="text/javascript">
  Epicport.API = new Epicport.API({
    game: "openxcom",
    arguments:
["-useOpenGL", "false", "-asyncBlit", "false", "-vSyncForOpenGL", "false", "-useOpenGLSmoothing", "false", "-mute", "false", "-playIntro", "true", "-language", "en", "-displayWidth", "960", "-displayHeight", "600"]
,
    preRun:
function () {
//  Module['FS_createFolder']('/', 'home', true, true);
  Module['FS_createFolder']('/home', 'emscripten', true, true);
  Module['FS_createFolder']('/home/emscripten', '.openxcom', true, true);
  Module['FS_createFolder']('/home/emscripten', '.config', true, true);
  Module['FS_createFolder']('/home/emscripten/.config', '.openxcom', true, true);
}
,
    start:
function () {
  var preventUpDown = function (e) {
    if (e.keyCode === 38 || e.keyCode === 40) {
      e.preventDefault();
    }
  }

  document.addEventListener("keydown", preventUpDown);
  document.addEventListener("keyup", preventUpDown);
  document.addEventListener("keypress", preventUpDown);

  var xcom = new Epicport.XCOM();
  xcom.start();
}
,
    js: '/js/openxcom.js'
  });
  var Module = Epicport.API.module();
</script>
    <div class="login_modal" title="Login required">
  <div>You should login if you want save or load game</div>
  <hr/>
  <form class="login">
    <div class="input">
      <label for="email">Email</label>
      <input id="email" type="text" name="email"/>
      <br/>
      <label for="password">Password</label>
      <input id="password" type="password" name="password"/>
    </div>
    <div class="left">
      <button id="form_login_button">Login</button>
    </div>
    <div class="right"><a href="/en/register" target="_blank">Register</a></div>
  </form>
  <hr/>
  <p class="social">Social networks</p>
  <div id="uLogin1" data-uloginid="fee955b6"></div>
</div>

<script type="text/javascript">
  function login(token) {
    $.getJSON("//ulogin.ru/token.php?host=" + encodeURIComponent(location.toString()) + "&token=" + token + "&callback=?", function(data) {
        data = $.parseJSON(data.toString());
        if (!data.error) {
          new Epicport.Login({ data: data });
        } else {
          Epicport.modalMessage("Invalid login or password", data.error);
        }
    });
  }

  $('#form_login_button').button();
  $('#form_login_button')
    .click(function () {
      $.post("/xhr/login", {
        'csrf-token': $("meta[name='csrf-token']").attr("content"),
        email: $('#email').val(),
        password: $('#password').val()
      },
      function (data) {
        new Epicport.Login({ data: data });
      })
    .fail(function() {
      Epicport.modalMessage("Invalid login or password", "Invalid login or password");
    });

    return false;
  });
</script>

<script src="//ulogin.ru/js/ulogin.js"></script>

</body>
</html>
